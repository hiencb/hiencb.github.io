{"version":3,"sources":["main.min.js"],"names":["angular","module","breadcrumbDirective","template","replace","scope","data","directive","$inject","config","locPrd","dvsPrd","apiUrl","commonFn","checkLink","o","isUrl","url","getLink","rawLink","getApiPath","getLinkObject","isString","getPathName","isObject","Object","keys","name","res","copy","length","getRelativePath","isApiUrl","isSubPath","html5Mode","className","linkChecker","linkGetter","linkObjectGetter","normalizer","normalize","value","undefined","_","startCase","toString","getAbsolutePath","relativePath","base","joinPaths","path","substring","paths","extractPaths","pathsEqual","path1","path2","_len","arguments","parts","Array","_key","reduce","acc","cur","removeTrailingSlash","removeLeadingSlash","indexOf","text","test","match","normalizePath","toLowerCase","constant","MainController","$scope","$location","$log","$http","pokeService","themesService","activate","getThemes","then","themes","vm","selectedTheme","getCategories","categories","catch","error","getData","pageName","breadcrumb","navInfo","activeClass","this","title","subtitle","mainPages","Home","Contact","About","debug","shown","$on","controller","$q","pokeServiceUrl","cachedData","cache","when","get","createPageData","cachedCategories","createCategoryData","current","navs","rawName","push","i","p","parentPath","map","k","factory","themesUrl"],"mappings":"AAAA,cAIA,WAGEA,QAAQC,OAAO,WAAY,UAAW,YAAa,sBAAuB,gBAG5E,WAME,QAASC,KACP,GAAIC,GAAW,4KAEf,QACEC,SAAS,EACTC,OAASC,KAAM,KACfH,SAAUA,GATdH,QAAQC,OAAO,WAAWM,UAAU,eAAgBL,GAEpDA,EAAoBM,cAYtB,WAME,QAASC,GAAOC,EAAQC,EAAQC,EAAQC,GAUtC,QAASC,GAAUC,GACjB,MAAOF,GAASG,MAAMD,IAAMF,EAASG,MAAMD,EAAEE,KAG/C,QAASC,GAAQH,GACf,GAAII,GAAUN,EAASG,MAAMD,IAAMA,GAAKF,EAASG,MAAMD,EAAEE,MAAQF,EAAEE,GACnE,OAAOG,GAAWD,GAGpB,QAASE,GAAcN,GACrB,GAAIf,QAAQsB,SAASP,GAAI,MAAOQ,GAAYR,EAC5C,IAAIf,QAAQwB,SAAST,GAAI,CACvB,GAAIU,OAAOC,KAAKX,IAAMA,EAAEY,MAAQZ,EAAEE,IAAK,MAAOF,GAAEY,IAEhD,IAAIC,GAAM5B,QAAQ6B,KAAKd,GACnBE,EAAMF,EAAEE,GAEZ,cADOW,GAAIX,IACJQ,OAAOC,KAAKE,GAAKE,OAASF,EAAML,EAAYN,GAErD,MAAO,MAGT,QAASG,GAAWH,GAClB,MAAOJ,GAASkB,gBAAgBd,EAAKL,GAGvC,QAASW,GAAYN,GACnB,MAAQe,GAASf,GAAaJ,EAASU,YAAYH,EAAWH,IAAtCA,EAG1B,QAASe,GAAS1B,GAChB,MAAuB,gBAATA,IAAqBO,EAASoB,UAAU3B,EAAMM,GAxC9DF,EAAOwB,WAAU,GAEjBvB,EAAOwB,UAAU,cAAe,YAChCxB,EAAOwB,UAAU,aAAc,SAC/BxB,EAAOyB,YAAYtB,GACnBH,EAAO0B,WAAWnB,GAClBP,EAAO2B,iBAAiBjB,GACxBV,EAAO4B,WAAW1B,EAAS2B,WAX7BxC,QAAQC,OAAO,WAAWQ,OAAOA,GAEjCA,EAAOD,SAAW,oBAAqB,0BAA2B,SAAU,eA+C9E,WAoBE,QAASgC,GAAUC,GACjB,MAAiB,QAAVA,GAA4BC,SAAVD,EAAsB,GAAKE,EAAEC,UAAUH,EAAMI,YAGxE,QAASC,GAAgBC,EAAcC,GACrC,MAAOC,GAAUD,EAAMD,GAGzB,QAAShB,GAAgBmB,EAAMF,GAC7B,MAAOf,GAAUiB,EAAMF,GAAQE,EAAKC,UAAUH,EAAKlB,QAAUoB,EAG/D,QAAS3B,GAAYN,GACnB,GAAImC,GAAQC,EAAapC,EACzB,OAAOmC,GAAMtB,QAAU,EAAIsB,EAAM,GAAKA,EAAMA,EAAMtB,OAAS,GAAK,IAAMsB,EAAMA,EAAMtB,OAAS,GAG7F,QAASwB,GAAWC,EAAOC,GACzB,MAAOhB,GAAUe,KAAWf,EAAUgB,GAGxC,QAASP,KACP,IAAK,GAAIQ,GAAOC,UAAU5B,OAAQ6B,EAAQC,MAAMH,GAAOI,EAAO,EAAGA,EAAOJ,EAAMI,IAC5EF,EAAME,GAAQH,UAAUG,EAG1B,OAAOF,GAAMG,OAAO,SAAUC,EAAKC,GACjC,MAAOC,GAAoBF,GAAO,IAAMG,EAAmBF,IAC1D,IAGL,QAAS/B,GAAUiB,EAAMF,GACvB,MAA8B,KAAvBE,EAAKiB,QAAQnB,GAGtB,QAAShC,GAAMoD,GACb,MAAuB,gBAATA,IAAqB,cAAcC,KAAKD,GAGxD,QAASF,GAAmBhB,GAC1B,MAAOA,GAAKoB,MAAM,YAAY,GAGhC,QAASL,GAAoBf,GAC3B,MAAOA,GAAKoB,MAAM,aAAa,GAGjC,QAASC,GAAcrB,GACrB,MAAOgB,GAAmBD,EAAoBf,IAAOsB,cAGvD,QAASnB,GAAaH,GACpB,MAAOA,GAAKoB,MAAM,YAAcpB,EArElC,GAAIrC,IACFwC,aAAcA,EACdP,gBAAiBA,EACjBvB,YAAaA,EACbQ,gBAAiBA,EACjBE,UAAWA,EACXjB,MAAOA,EACPiC,UAAWA,EACXT,UAAWA,EACX+B,cAAeA,EACfjB,WAAYA,EACZY,mBAAoBA,EACpBD,oBAAqBA,EAGvBjE,SAAQC,OAAO,WAAWwE,SAAS,SAAU,4BAA4BA,SAAS,iBAAkB,sCAAsCA,SAAS,YAAa,qCAAqCA,SAAS,WAAY5D,MA0D5N,WAME,QAAS6D,GAAeC,EAAQC,EAAWC,EAAMC,EAAOC,EAAaC,GAmBnE,QAASC,KACPD,EAAcE,YAAYC,KAAK,SAAUC,GACvCC,EAAGD,OAASA,EACZC,EAAGC,cAAgBF,EAAO,KAG5BL,EAAYQ,gBAAgBJ,KAAK,SAAUK,GACzC,MAAOH,GAAGG,WAAaA,IACtBC,MAAM,SAAUC,GACjB,MAAOL,GAAGK,MAAQA,IAItB,QAASC,KACPZ,EAAYY,QAAQf,EAAU3D,OAAOkE,KAAK,SAAUvD,GAClDyD,EAAG/E,KAAOsB,EAAItB,KACd+E,EAAGO,SAAWhE,EAAID,KAClB0D,EAAGQ,WAAajE,EAAIkE,UACnBL,MAAM,SAAUC,GACjB,MAAOL,GAAGK,MAAQA,IAItB,QAASK,GAAY7C,GACnB,MAAOA,KAAS0B,EAAU3D,MAAQ,SAAW,GA1C/C,GAAIoE,GAAKW,IACTX,GAAGY,MAAQ,WACXZ,EAAGa,SAAW,qEACdb,EAAGc,WACDC,KAAQ,IACRC,QAAW,WACXC,MAAS,UAEXjB,EAAGkB,OAAUC,OAAO,GACpBnB,EAAGC,iBACHD,EAAGG,cACHH,EAAGU,YAAcA,EACjBd,IAEAN,EAAO8B,IAAI,yBAA0B,WACnCd,MAnBJ3F,QAAQC,OAAO,WAAWyG,WAAW,iBAAkBhC,GAEvDA,EAAelE,SAAW,SAAU,YAAa,OAAQ,QAAS,cAAe,oBAmDnF,WAME,QAASuE,GAAY4B,EAAI7B,EAAOlE,EAAQgG,EAAgB/F,GAQtD,QAAS8E,KACP,GAAIzC,GAAOQ,UAAU5B,OAAS,GAAsBY,SAAjBgB,UAAU,GAAmBA,UAAU,GAAK,IAE3EzC,EAAMJ,EAAS0D,cAAc1D,EAASiC,gBAAgBI,EAAM0D,IAC5DC,EAAaC,EAAMxG,KAAKW,EAC5B,OAAI4F,GAAmBF,EAAGI,KAAKF,GAExB/B,EAAMkC,IAAI/F,GAAKkE,KAAK,SAAUvD,GACnC,GAAItB,GAAO2G,EAAerF,EAAItB,KAAMW,EAEpC,OADA6F,GAAMxG,KAAKW,GAAOX,EACXA,IAIX,QAASiF,KACP,GAAI2B,GAAmBJ,EAAMtB,UAC7B,OAAI0B,GAAyBP,EAAGI,KAAKG,GAC9BvB,IAAUR,KAAK,SAAUvD,GAC9B,GAAI4D,GAAa2B,EAAmBvF,EAAItB,KAExC,OADAwG,GAAMtB,WAAaA,EACZA,IAIX,QAASyB,GAAe3G,EAAMW,GAC5B,GAAIW,IACFD,KAAM,GACNrB,KAAMA,EACNwF,SACEsB,QAAS,GACTC,SAIJ,IAAIxG,EAASyC,WAAWrC,EAAK2F,GAG3B,MAFAhF,GAAIkE,QAAQsB,QAAU,OACtBxF,EAAID,KAAO,aACJC,CAGT,IAAImB,GAAelC,EAASkB,gBAAgBd,EAAK2F,GAC7CU,EAAUhH,EAAKqB,MAAQd,EAASU,YAAYwB,EAChDnB,GAAID,KAAOC,EAAIkE,QAAQsB,QAAUvG,EAAS2B,UAAU8E,GACpD1F,EAAIkE,QAAQuB,KAAKE,MAAO5F,KAAM,OAAQuB,KAAM,KAE5C,IAAIE,GAAQvC,EAASwC,aAAaN,EAClC,KAAKK,EAAO,MAAOxB,EAEnB,KAAK,GAAI4F,GAAI,EAAGA,EAAIpE,EAAMtB,OAAS,EAAG0F,IAAK,CACzC,GAAIC,GAAIrE,EAAMoE,GACVE,EAAa9F,EAAIkE,QAAQuB,KAAKzF,EAAIkE,QAAQuB,KAAKvF,OAAS,GAAGoB,KAC3DA,EAAOrC,EAASoC,UAAUyE,EAAYD,GACtC9F,EAAOd,EAAS2B,UAAUiF,EAC9B7F,GAAIkE,QAAQuB,KAAKE,MAAO5F,KAAMA,EAAMuB,KAAMA,IAG5C,MAAOtB,GAGT,QAASuF,GAAmB7G,GAC1B,MAAOmB,QAAOC,KAAKpB,GAAMqH,IAAI,SAAUC,GACrC,OACEjG,KAAMd,EAAS2B,UAAUoF,GACzB1E,KAAMrC,EAASkB,gBAAgBzB,EAAKsH,GAAIhH,MAtE9C,GAAIkG,IAAUxG,QAAUkF,WAAY,KAEpC,QACEG,QAASA,EACTJ,cAAeA,GARnBvF,QAAQC,OAAO,WAAW4H,QAAQ,cAAe9C,GAEjDA,EAAYvE,SAAW,KAAM,QAAS,SAAU,iBAAkB,eA+EpE,WAME,QAASwE,GAAcF,EAAOgD,GAG5B,QAAS5C,KACP,MAAOJ,GAAMkC,IAAIc,GAAW3C,KAAK,SAAUvD,GACzC,MAAOA,GAAItB,OAJf,OAAS4E,UAAWA,GAJtBlF,QAAQC,OAAO,WAAW4H,QAAQ,gBAAiB7C,GAEnDA,EAAcxE,SAAW,QAAS","file":"main.min.js","sourcesContent":["'use strict';\n\n// ReSharper disable UndeclaredGlobalVariableUsing\n\n(function () {\n  'use strict';\n\n  angular.module('mainApp', ['ngRoute', 'ngAnimate', 'angular-loading-bar', 'dataView']);\n})();\n// ReSharper disable UndeclaredGlobalVariableUsing\n(function () {\n  'use strict';\n\n  angular.module('mainApp').directive('cbBreadcrumb', breadcrumbDirective);\n\n  breadcrumbDirective.$inject = [];\n  function breadcrumbDirective() {\n    var template = '\\n<ol class=\"breadcrumb\">\\n  <li ng-repeat=\"nav in data.navs\">\\n    <a ng-href=\"{{nav.path}}\">{{nav.name}}</a>\\n  </li>\\n  <li class=\"active\">{{data.current}}</li>\\n</ol>';\n\n    return {\n      replace: true,\n      scope: { data: '<' },\n      template: template\n    };\n  }\n})();\n// ReSharper disable UndeclaredGlobalVariableUsing\n(function () {\n  'use strict';\n\n  angular.module('mainApp').config(config);\n\n  config.$inject = ['$locationProvider', 'dataViewServiceProvider', 'apiUrl', 'commonFn'];\n  function config(locPrd, dvsPrd, apiUrl, commonFn) {\n    locPrd.html5Mode(true);\n\n    dvsPrd.className('object-list', 'unstyled');\n    dvsPrd.className('panel-item', 'panel');\n    dvsPrd.linkChecker(checkLink);\n    dvsPrd.linkGetter(getLink);\n    dvsPrd.linkObjectGetter(getLinkObject);\n    dvsPrd.normalizer(commonFn.normalize);\n\n    function checkLink(o) {\n      return commonFn.isUrl(o) || commonFn.isUrl(o.url);\n    }\n\n    function getLink(o) {\n      var rawLink = commonFn.isUrl(o) && o || commonFn.isUrl(o.url) && o.url;\n      return getApiPath(rawLink);\n    }\n\n    function getLinkObject(o) {\n      if (angular.isString(o)) return getPathName(o);\n      if (angular.isObject(o)) {\n        if (Object.keys(o) && o.name && o.url) return o.name;\n\n        var res = angular.copy(o);\n        var url = o.url;\n        delete res.url;\n        return Object.keys(res).length ? res : getPathName(url);\n      }\n      return null;\n    }\n\n    function getApiPath(url) {\n      return commonFn.getRelativePath(url, apiUrl);\n    }\n\n    function getPathName(url) {\n      return !isApiUrl(url) ? url : commonFn.getPathName(getApiPath(url));\n    }\n\n    function isApiUrl(data) {\n      return typeof data === \"string\" && commonFn.isSubPath(data, apiUrl);\n    }\n  }\n})();\n// ReSharper disable UndeclaredGlobalVariableUsing\n(function () {\n  'use strict';\n\n  var commonFn = {\n    extractPaths: extractPaths,\n    getAbsolutePath: getAbsolutePath,\n    getPathName: getPathName,\n    getRelativePath: getRelativePath,\n    isSubPath: isSubPath,\n    isUrl: isUrl,\n    joinPaths: joinPaths,\n    normalize: normalize,\n    normalizePath: normalizePath,\n    pathsEqual: pathsEqual,\n    removeLeadingSlash: removeLeadingSlash,\n    removeTrailingSlash: removeTrailingSlash\n  };\n\n  angular.module('mainApp').constant('apiUrl', 'http://pokeapi.co/api/v2').constant('pokeServiceUrl', 'https://pokeservice.herokuapp.com/').constant('themesUrl', 'public/resources/data/themes.json').constant('commonFn', commonFn);\n\n  function normalize(value) {\n    return value === null || value === undefined ? '' : _.startCase(value.toString());\n  }\n\n  function getAbsolutePath(relativePath, base) {\n    return joinPaths(base, relativePath);\n  }\n\n  function getRelativePath(path, base) {\n    return isSubPath(path, base) ? path.substring(base.length) : path;\n  }\n\n  function getPathName(url) {\n    var paths = extractPaths(url);\n    return paths.length <= 1 ? paths[0] : paths[paths.length - 2] + '/' + paths[paths.length - 1];\n  }\n\n  function pathsEqual(path1, path2) {\n    return normalize(path1) === normalize(path2);\n  }\n\n  function joinPaths() {\n    for (var _len = arguments.length, parts = Array(_len), _key = 0; _key < _len; _key++) {\n      parts[_key] = arguments[_key];\n    }\n\n    return parts.reduce(function (acc, cur) {\n      return removeTrailingSlash(acc) + '/' + removeLeadingSlash(cur);\n    }, '');\n  }\n\n  function isSubPath(path, base) {\n    return path.indexOf(base) === 0;\n  }\n\n  function isUrl(text) {\n    return typeof text === \"string\" && /https?:\\/\\//.test(text);\n  }\n\n  function removeLeadingSlash(path) {\n    return path.match(/^\\/?(.*)/)[1];\n  }\n\n  function removeTrailingSlash(path) {\n    return path.match(/(.*?)\\/?$/)[1];\n  }\n\n  function normalizePath(path) {\n    return removeLeadingSlash(removeTrailingSlash(path)).toLowerCase();\n  }\n\n  function extractPaths(path) {\n    return path.match(/[^\\/]+/g) || path;\n  }\n})();\n// ReSharper disable UndeclaredGlobalVariableUsing\n(function () {\n  'use strict';\n\n  angular.module('mainApp').controller('mainController', MainController);\n\n  MainController.$inject = ['$scope', '$location', '$log', '$http', 'pokeService', 'themesService'];\n  function MainController($scope, $location, $log, $http, pokeService, themesService) {\n    var vm = this;\n    vm.title = 'PokéCOOL';\n    vm.subtitle = 'A pokémon encyclopedia - Everything you want to know about Pokémon';\n    vm.mainPages = {\n      'Home': '/',\n      'Contact': '/contact',\n      'About': '/about'\n    };\n    vm.debug = { shown: false };\n    vm.selectedTheme = {};\n    vm.categories = {};\n    vm.activeClass = activeClass;\n    activate();\n\n    $scope.$on('$locationChangeSuccess', function () {\n      getData();\n    });\n\n    function activate() {\n      themesService.getThemes().then(function (themes) {\n        vm.themes = themes;\n        vm.selectedTheme = themes[0];\n      });\n\n      pokeService.getCategories().then(function (categories) {\n        return vm.categories = categories;\n      }).catch(function (error) {\n        return vm.error = error;\n      });\n    }\n\n    function getData() {\n      pokeService.getData($location.url()).then(function (res) {\n        vm.data = res.data;\n        vm.pageName = res.name;\n        vm.breadcrumb = res.navInfo;\n      }).catch(function (error) {\n        return vm.error = error;\n      });\n    }\n\n    function activeClass(path) {\n      return path === $location.url() ? 'active' : '';\n    }\n  }\n})();\n\n// TODO: handle ajax errors\n// ReSharper disable UndeclaredGlobalVariableUsing\n(function () {\n  'use strict';\n\n  angular.module('mainApp').factory('pokeService', pokeService);\n\n  pokeService.$inject = ['$q', '$http', 'apiUrl', 'pokeServiceUrl', 'commonFn'];\n  function pokeService($q, $http, apiUrl, pokeServiceUrl, commonFn) {\n    var cache = { data: {}, categories: null };\n\n    return {\n      getData: getData,\n      getCategories: getCategories\n    };\n\n    function getData() {\n      var path = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '/';\n\n      var url = commonFn.normalizePath(commonFn.getAbsolutePath(path, pokeServiceUrl));\n      var cachedData = cache.data[url];\n      if (cachedData) return $q.when(cachedData);\n\n      return $http.get(url).then(function (res) {\n        var data = createPageData(res.data, url);\n        cache.data[url] = data;\n        return data;\n      });\n    }\n\n    function getCategories() {\n      var cachedCategories = cache.categories;\n      if (cachedCategories) return $q.when(cachedCategories);\n      return getData().then(function (res) {\n        var categories = createCategoryData(res.data);\n        cache.categories = categories;\n        return categories;\n      });\n    }\n\n    function createPageData(data, url) {\n      var res = {\n        name: '',\n        data: data,\n        navInfo: {\n          current: '',\n          navs: []\n        }\n      };\n\n      if (commonFn.pathsEqual(url, pokeServiceUrl)) {\n        res.navInfo.current = 'Home';\n        res.name = 'Categories';\n        return res;\n      }\n\n      var relativePath = commonFn.getRelativePath(url, pokeServiceUrl);\n      var rawName = data.name || commonFn.getPathName(relativePath);\n      res.name = res.navInfo.current = commonFn.normalize(rawName);\n      res.navInfo.navs.push({ name: 'Home', path: '/' });\n\n      var paths = commonFn.extractPaths(relativePath);\n      if (!paths) return res;\n\n      for (var i = 0; i < paths.length - 1; i++) {\n        var p = paths[i];\n        var parentPath = res.navInfo.navs[res.navInfo.navs.length - 1].path;\n        var path = commonFn.joinPaths(parentPath, p);\n        var name = commonFn.normalize(p);\n        res.navInfo.navs.push({ name: name, path: path });\n      }\n\n      return res;\n    }\n\n    function createCategoryData(data) {\n      return Object.keys(data).map(function (k) {\n        return {\n          name: commonFn.normalize(k),\n          path: commonFn.getRelativePath(data[k], apiUrl)\n        };\n      });\n    }\n  }\n})();\n// ReSharper disable UndeclaredGlobalVariableUsing\n(function () {\n  'use strict';\n\n  angular.module('mainApp').factory('themesService', themesService);\n\n  themesService.$inject = ['$http', 'themesUrl'];\n  function themesService($http, themesUrl) {\n    return { getThemes: getThemes };\n\n    function getThemes() {\n      return $http.get(themesUrl).then(function (res) {\n        return res.data;\n      });\n    }\n  }\n})();"]}